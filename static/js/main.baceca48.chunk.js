(this["webpackJsonpreact-social-network"]=this["webpackJsonpreact-social-network"]||[]).push([[0],{105:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(12),a=n(2),s="dialogs/SEND-MESSAGE",i={userData:[{username:"user1",userId:"1",status:"online",country:"Ukraine",city:"Kiev",profileStatus:"mmm",photoUrl:"https://cdnb.artstation.com/p/assets/images/images/023/675/213/20200125141012/smaller_square/ava-battle-img-1823.jpg?1579983012"},{username:"user2",userId:"2",status:"online",country:"Ukraine",city:"Odessa",profileStatus:"mmm",photoUrl:"https://www.daphnedemaris.com/wp-content/uploads/2017/11/ava-img.jpg"},{username:"user3",userId:"3",status:"online",profileStatus:"mmm",country:"Russia",city:"Moscow",photoUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTapsczAOf7_g-ZzXikO78qCP9Ytw1eKwoLgQ&usqp=CAU"},{username:"user4",userId:"4",status:"offline",profileStatus:"mmm",country:"Belarus",city:"Minsk",photoUrl:"https://cdn-imgix.headout.com/tour/7064/TOUR-IMAGE/44a6d6c4-86fd-4f93-8204-7ffd4fa4e4e4-4445-IMGWorldsofAdventure-2.JPG"}],messages:[{content:"hello world",recipient:"user2",author:"user1",owner:!1,date:"11.06.2021"},{content:"new message",recipient:"user2",author:"user1",owner:!1,date:"11.05.2021"},{content:"second wind",recipient:"user2",author:"user1",owner:!1,date:"11.04.2021"},{content:"test world",recipient:"user3",author:"user2",owner:!1,date:"11.09.2021"},{content:"new message user 2",recipient:"user3",author:"user2",owner:!1,date:"11.08.2021"},{content:"second wind",recipient:"user3",author:"user2",owner:!1,date:"11.07.2021"},{content:"from world",recipient:"user1",author:"user3",owner:!1,date:"13.09.2021"},{content:"new message user 3",recipient:"user1",owner:!1,date:"12.08.2021"},{content:"wind",recipient:"user1",owner:!1,date:"01.07.2021"},{content:"message world",recipient:"user2",author:"user4",owner:!1,date:"06.09.2021"},{content:"new message user 4",recipient:"user3",author:"user4",owner:!1,date:"08.08.2021"},{content:"second wind",recipient:"user1",author:"user4",owner:!1,date:"09.07.2021"}]},o=function(e){return{type:s,id:1,newMessageBody:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(a.a)(Object(a.a)({},e),{},{messages:[].concat(Object(r.a)(e.messages),[{content:t.newMessageBody,recipient:"user".concat(t.id),owner:!0,author:"user1",date:"10.11.2020"}])});default:return e}}},106:function(e,t,n){"use strict";n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return x})),n.d(t,"d",(function(){return v}));var r=n(8),a=n.n(r),s=n(14),i=n(12),o=n(2),c=n(15),u="users/TOGGLE_FOLLOW",l="users/SET_USERS",d="users/SET_CURRENT_PAGE",p="users/SET_TOTAL_USERS_COUNT",f="users/TOGGLE_FETCHING",b="users/TOGGLE_IS_FOLLOWING_PROGGRES",j={users:[],pageSize:4,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},h=function(e){return{type:l,users:e}},m=function(){return{type:f}},O=function(e,t){return{type:b,isFetching:e,id:t}},g=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(m()),n.next=3,c.d.getUsers(e,t);case 3:s=n.sent,r(h(s.items)),r((a=s.totalCount,{type:p,totalCount:a})),r(m());case 7:case"end":return n.stop()}var a}),n)})));return function(e){return n.apply(this,arguments)}}()},x=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:d,pageNumber:e}),r(m()),n.next=4,c.d.getUsers(e,t);case 4:s=n.sent,r(m()),r(h(s.items));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},v=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r(O(!0,t)),!e){n.next=7;break}return n.next=4,c.b.unfollow(t);case 4:n.t0=n.sent,n.next=10;break;case 7:return n.next=9,c.b.follow(t);case 9:n.t0=n.sent;case 10:0===n.t0.resultCode&&r({type:u,userId:t}),r(O(!1,t));case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(o.a)(Object(o.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(o.a)(Object(o.a)({},e),{},{followed:!e.followed}):e}))});case l:return Object(o.a)(Object(o.a)({},e),{},{users:Object(i.a)(t.users)});case d:return Object(o.a)(Object(o.a)({},e),{},{currentPage:t.pageNumber});case p:return Object(o.a)(Object(o.a)({},e),{},{totalUsersCount:t.totalCount});case f:return Object(o.a)(Object(o.a)({},e),{},{isFetching:!e.isFetching});case b:return Object(o.a)(Object(o.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(i.a)(e.followingInProgress),[t.id]):e.followingInProgress.filter((function(e){return e!==t.id}))});default:return e}}},15:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c}));var r=n(107),a=r.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"4619fab4-7668-4006-aaf0-c30e1e6a4b3f"}}),s={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))}},i={follow:function(e){return a.post("follow/".concat(e),{}).then((function(e){return e.data}))},unfollow:function(e){return a.delete("follow/".concat(e)).then((function(e){return e.data}))}},o={me:function(){return a.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.post("auth/login",{email:e,password:t,rememberMe:n})},logout:function(){return a.delete("auth/login")}},c={getUser:function(e){return a.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return a.get("profile/status/".concat(e))},updateStatus:function(e){return a.put("profile/status",{status:e})}}},21:function(e,t,n){e.exports={loginFormWrapper:"Login_loginFormWrapper__1uUFw",loginFormConainer:"Login_loginFormConainer__3NG6f",inputContainer:"Login_inputContainer__2klAg",checkboxContainer:"Login_checkboxContainer__2jmdJ",checkbox:"Login_checkbox__1JDZh",loginBtn:"Login_loginBtn__2L6y4",error:"Login_error__3QjK6"}},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(5),s=n(10),i=n(11),o=n(71),c=n(2),u=n(0),l=n.n(u),d=n(27),p=n(8),f=n.n(p),b=n(14),j=n(15),h="auth/SET_USER_DATA",m="auth/SET_FORM_ERROR",O={id:null,login:null,email:null,isAuth:!1,formError:null},g=function(e,t){var n=e.id,r=e.login,a=e.email;return{type:h,payload:{id:n,login:r,email:a,isAuth:t}}},x=function(){return function(){var e=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.me();case 2:0===(n=e.sent).resultCode&&t(g(n.data,!0));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(c.a)(Object(c.a)({},e),t.payload);case m:return Object(c.a)(Object(c.a)({},e),{},{formError:t.payload.formError});default:return e}},w=n(42),_=n(22),y=n(37),C=n.n(y),S=n(1),E=function(e){return Object(S.jsx)("header",{className:C.a.header,children:Object(S.jsx)("div",{className:C.a.loginContainer,children:e.isAuth?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(_.b,{onClick:function(){e.getUserProfile(e.id),e.getUserStatus(e.id)},className:C.a.login,to:"/profile/".concat(e.id),children:e.login}),Object(S.jsx)(_.b,{onClick:function(){return e.logout()},className:C.a.logout,to:"/login",children:"Logout"})]}):Object(S.jsx)(_.b,{className:C.a.login,to:"/login",children:"Login"})})})},k=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(E,Object(c.a)({},this.props))})}}]),n}(l.a.Component),N=Object(d.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,id:e.auth.id}}),{getUserProfile:w.c,getUserStatus:w.d,logout:function(){return function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.logout();case 2:0===e.sent.data.resultCode&&t(g({id:null,login:null,email:null},!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(k),L=n(31),U=n(3),A=n(55),T=n(21),P=n.n(T),I=A.a().shape({email:A.b().email("Enter correct email").required("Please enter email"),password:A.b().min(8,"8 Char min").required("Please enter password")}),F=Object(d.b)((function(e){return{isAuth:e.auth.isAuth,formError:e.auth.formError}}),{login:function(e,t,n){return function(){var r=Object(b.a)(f.a.mark((function r(a){var s;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,j.a.login(e,t,n);case 2:0===(s=r.sent).data.resultCode?a(x()):a((i=s.data.messages[0],{type:m,payload:{formError:i}}));case 4:case"end":return r.stop()}var i}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(S.jsx)(U.a,{to:"/profile"}):Object(S.jsx)("div",{className:P.a.loginFormWrapper,children:Object(S.jsx)(L.d,{initialValues:{email:"",password:"",rememberMe:!1},validateOnBlur:!0,validationSchema:I,onSubmit:function(t,n){e.login(t.email,t.password,t.rememberMe),n.setSubmitting(!1),n.resetForm({values:{email:"",password:"",rememberMe:!1}})},children:function(t){var n=t.values,r=t.dirty,a=t.isValid,s=t.isSubmitting,i=t.handleChange,o=t.handleBlur,c=t.handleSubmit;return Object(S.jsxs)(L.c,{onSubmit:c,className:P.a.loginFormConainer,children:[Object(S.jsx)("h1",{children:"Log in"}),Object(S.jsx)("p",{children:"Email and password"}),Object(S.jsxs)("div",{className:P.a.inputContainer,children:[e.formError&&Object(S.jsx)("p",{className:P.a.error,children:e.formError}),Object(S.jsx)(L.a,{component:"p",className:P.a.error,name:"email"}),Object(S.jsx)(L.b,{className:P.a.email,name:"email",type:"text",placeholder:"Email",onChange:i,onBlur:o,value:n.email}),Object(S.jsx)(L.a,{component:"p",className:P.a.error,name:"password"}),Object(S.jsx)(L.b,{className:P.a.password,name:"password",type:"password",placeholder:"password",onChange:i,onBlur:o,value:n.password})]}),Object(S.jsxs)("div",{className:P.a.checkboxContainer,children:[Object(S.jsx)(L.b,{className:P.a.checkbox,name:"rememberMe",type:"checkbox"}),Object(S.jsx)("label",{htmlFor:"rememberme",children:"Remember me "})]}),Object(S.jsx)("button",{disabled:!r&&a||s,type:"submit",className:P.a.loginBtn,children:"Login"})]})}})})})),D=n(26),R=n.n(D),G=function(){return Object(S.jsxs)("div",{className:R.a.sidebar,children:[Object(S.jsx)("div",{children:Object(S.jsx)("img",{src:"https://d2gg9evh47fn9z.cloudfront.net/800px_COLOURBOX4866092.jpg",alt:""})}),Object(S.jsxs)("nav",{className:R.a.nav,children:[Object(S.jsx)("div",{children:Object(S.jsx)(_.b,{activeClassName:R.a.activeLink,className:R.a.item,to:"/profile",children:"Profile"})}),Object(S.jsx)("div",{children:Object(S.jsx)(_.b,{activeClassName:R.a.activeLink,className:R.a.item,to:"/messages",children:"Messages"})}),Object(S.jsx)("div",{children:Object(S.jsx)(_.b,{activeClassName:R.a.activeLink,className:R.a.item,to:"/users",children:"Users"})})]})]})},M="INITIALIZED_SUCCESS",z={initialized:!1},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case M:return Object(c.a)(Object(c.a)({},e),{},{initialized:!0});default:return e}},H=(n(241),l.a.lazy((function(){return n.e(4).then(n.bind(null,257))}))),q=l.a.lazy((function(){return n.e(5).then(n.bind(null,259))})),W=l.a.lazy((function(){return n.e(3).then(n.bind(null,258))})),J=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?this.props.isAuth?Object(S.jsxs)("div",{className:"app-wrapper",children:[Object(S.jsx)(N,{}),Object(S.jsxs)("div",{className:"wrap-whole",children:[Object(S.jsx)(G,{}),Object(S.jsx)(u.Suspense,{fallback:Object(S.jsx)(o.a,{}),children:Object(S.jsx)("div",{className:"app-wrapper-content",children:Object(S.jsxs)(U.d,{children:[Object(S.jsx)(U.b,{path:"/",exact:!0,children:Object(S.jsx)(U.a,{to:"/profile"})}),Object(S.jsx)(U.b,{path:"/login",exact:!0,children:Object(S.jsx)(U.a,{to:"/profile"})}),Object(S.jsx)(U.b,{path:"/profile/:userId?",render:function(){return Object(S.jsx)(H,{})}}),Object(S.jsx)(U.b,{path:"/messages",render:function(){return Object(S.jsx)(W,{})}}),Object(S.jsx)(U.b,{path:"/users",render:function(){return Object(S.jsx)(q,{})}}),Object(S.jsx)(U.b,{render:function(){return Object(S.jsx)("h1",{children:"404 NOT FOUND"})}})]})})})]})]}):Object(S.jsx)(F,{}):Object(S.jsx)(o.a,{})}}]),n}(l.a.Component),K=Object(d.b)((function(e){return{initialized:e.app.initialized,isAuth:e.auth.isAuth}}),{initializeApp:function(){return function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(x());case 2:t({type:M});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(J),V=n(54),X=n.n(V),Z=(n(242),n(44)),Q=n(105),Y=n(106),$=n(114),ee=Object(Z.b)({profilePage:w.b,dialogsPage:Q.a,usersPage:Y.a,auth:v,app:B}),te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Z.c,ne=Object(Z.d)(ee,te(Object(Z.a)($.a)));window.__store__=ne;var re=ne;X.a.render(Object(S.jsx)(l.a.StrictMode,{children:Object(S.jsx)(_.a,{children:Object(S.jsx)(d.a,{store:re,children:Object(S.jsx)(K,{})})})}),document.getElementById("root"))},26:function(e,t,n){e.exports={sidebar:"Navbar_sidebar__2q5oM",nav:"Navbar_nav__1gt8S",item:"Navbar_item__2ILSa",activeLink:"Navbar_activeLink__2PygG"}},37:function(e,t,n){e.exports={header:"Header_header__1mvsV",loginContainer:"Header_loginContainer__3DAUd",login:"Header_login__1zOkm",logout:"Header_logout__3hW24"}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return O}));var r=n(8),a=n.n(r),s=n(14),i=n(12),o=n(2),c=n(15),u="profile/ADD-POST",l="profile/SET_USER_PROFILE",d="profile/SET_USER_STATUS",p="profile/DELETE_POST",f={postData:[{id:0,text:"Hi, man",likeCount:"1"},{id:1,text:"Hi, guys",likeCount:"4"},{id:2,text:"Hi, i'ts me",likeCount:"5"},{id:3,text:"I'm here",likeCount:"51"}],status:"",profile:null},b=function(e){return{type:u,newPostText:e}},j=function(e){return{type:d,status:e}},h=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.c.getUser(e);case 2:r=t.sent,n({type:l,profile:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.c.getStatus(e);case 2:200===(r=t.sent).status&&n(j(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.c.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(j(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(o.a)(Object(o.a)({},e),{},{postData:[].concat(Object(i.a)(e.postData),[{id:e.postData.length,text:t.newPostText,likeCount:e.postData.length+3}])});case l:return Object(o.a)(Object(o.a)({},e),{},{profile:t.profile});case d:return Object(o.a)(Object(o.a)({},e),{},{status:t.status});case p:return Object(o.a)(Object(o.a)({},e),{},{postData:e.postData.filter((function(e){return e.id!==t.postId}))});default:return e}}},71:function(e,t,n){"use strict";var r=n.p+"static/media/preloader.814fb680.svg",a=(n(0),n(72)),s=n.n(a),i=n(1);t.a=function(){return Object(i.jsxs)("div",{className:s.a.preLoaderContainer,children:[Object(i.jsx)("img",{className:s.a.preLoader,src:r,alt:""})," :"]})}},72:function(e,t,n){e.exports={preLoader:"Preloader_preLoader__1EdkA",preLoaderContainer:"Preloader_preLoaderContainer__17jOH"}}},[[243,1,2]]]);
//# sourceMappingURL=main.baceca48.chunk.js.map